(()=>{"use strict";var t=function(){function t(t,e,r,o,n,s,i,u){this.id=t,this.name=e,this.repoURL=r,this.author=o,this.authorURL=n,this.forkNumber=s,this.starNumber=i,this.issueNumber=u}return t.prototype.getID=function(){return this.id},t.prototype.setID=function(t){this.id=t},t.prototype.getName=function(){return this.name},t.prototype.setName=function(t){this.name=t},t.prototype.getRepoURL=function(){return this.repoURL},t.prototype.getAuthor=function(){return this.author},t.prototype.setAuthor=function(t){this.author=t},t.prototype.getAuthorURL=function(){return this.authorURL},t.prototype.getForkNumber=function(){return this.forkNumber},t.prototype.getStarNumber=function(){return this.starNumber},t.prototype.getIssueNumber=function(){return this.issueNumber},t.prototype.getREADME=function(){return this.README},t.prototype.setREADME=function(t){this.README=t},t}(),e=function(){function t(){this.user="",this.repoName="",this.language=""}return t.prototype.getUser=function(){return this.user},t.prototype.setUser=function(t){this.user=t},t.prototype.getRepoName=function(){return this.repoName},t.prototype.setRepoName=function(t){this.repoName=t},t.prototype.getLanguage=function(){return this.language},t.prototype.setLanguage=function(t){this.language="All"==t?"":t},t.prototype.buildFilterBlock=function(){var t="";return""==this.language&&""==this.user&&""==this.repoName?(t+="user:",this.filterBlock=t,t):(""!=this.language&&(t+="language:"+this.language+"+"),""!=this.user&&(t+="user:"+this.user+"+"),""!=this.repoName&&(t+=""+this.repoName),this.filterBlock=t,t)},t.prototype.getFilterBlock=function(){return this.filterBlock},t}(),r=function(){function t(){this.method="GET",this.filter=new e}return t.prototype.getMethod=function(){return this.method},t.prototype.setMethod=function(t){this.method=t},t.prototype.getHeaders=function(){return this.headers},t.prototype.setHeaders=function(t){this.headers=t},t.prototype.sendREADMERequest=function(t){return this.buildREADMERequest(t),fetch(this.getRequest(),{method:"GET",headers:{Accept:"application/vnd.github.html"}}).then((function(t){return t.text()})).then((function(t){try{JSON.parse(t)&&(t='<h2 class="text-center">README is currently unavailable</h2>')}catch(e){return t}return t})).catch((function(t){console.log(t)}))},t.prototype.sendSearchRequest=function(){return this.buildSearchRequest(),fetch(this.request,{method:"GET",headers:{Accept:"application/vnd.github.v3+json"}}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){console.log(t)}))},t.prototype.getRequest=function(){return this.request},t.prototype.setRequest=function(t){this.request=t},t.prototype.getFilter=function(){return this.filter},t.prototype.buildREADMERequest=function(t){var e="https://api.github.com/repos/"+t.getAuthor()+"/"+t.getName()+"/readme";this.setRequest(e)},t.prototype.buildSearchRequest=function(){this.setMethod("GET");var t="https://api.github.com/search/repositories?q=";t+=this.filter.buildFilterBlock(),this.setRequest(t)},t}(),o=function(){function t(){this.mainBody=document.querySelector("#main")}return t.prototype.getMainBody=function(){return this.mainBody},t.prototype.clearMainBody=function(){this.mainBody.innerHTML=""},t.prototype.drawRepositoryCard=function(t){var e=document.createElement("div");e.className="col-12 repo-card";var r="";r+='<h2 class="text-center"><a id="repo-header" href="'+t.getRepoURL()+'" target="_blank">'+t.getName()+'</a></h2>\n                        <h3 class="text-center">By <a id="repo-header" href="'+t.getAuthorURL()+'" target="_blank">'+t.getAuthor()+'</a></h3>\n                        <hr>\n                        <div class="row">\n                            <div class="col-4 col-s-12">\n                                <h3 class="text-center">Key Details</h3>\n                                <div class="row">\n                                    <div class="col-4">\n                                        <h4 class="text-center">Forks</h4>\n                                        <h1 class="text-center">'+t.getForkNumber()+'</h1>\n                                    </div>\n                                    <div class="col-4">\n                                        <h4 class="text-center">Stars</h4>\n                                        <h1 class="text-center">'+t.getStarNumber()+'</h1>\n                                    </div>\n                                    <div class="col-4">\n                                        <h4 class="text-center">Issues</h4>\n                                        <h1 class="text-center">'+t.getIssueNumber()+'</h1>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="col-8 col-s-12">\n                                <div id="README">'+t.getREADME()+"</div>\n                            </div>\n                        </div>\n                        ",e.innerHTML=r,this.getMainBody().appendChild(e)},t.prototype.outputNoRepositoriesFound=function(){var t=document.createElement("div");t.innerHTML='<h2 class="text-center">No repositories found under these filters</h2>',this.getMainBody().appendChild(t)},t}();(new(function(){function e(){var e=this;this.setBurgerMenu=function(t){var e=t.target.parentElement;e.classList.contains("responsive")?e.classList.remove("responsive"):e.classList.add("responsive")},this.setLanguageFilter=function(t){var r=t.target.textContent;e.APICaller.getFilter().setLanguage(r)},this.setRepositoryFilter=function(t){var r=t.target.value;e.APICaller.getFilter().setRepoName(r)},this.setUsernameFilter=function(t){var r=t.target.value;e.APICaller.getFilter().setUser(r)},this.retrieveRepositories=function(r){e.output.clearMainBody(),e.resetRepositories(),e.APICaller.sendSearchRequest().then((function(r){try{if(r.items.length>0)for(var o=function(o){var n=r.items[o];console.log(n.stargazers_count);var s=new t(n.id,n.name,n.html_url,n.owner.login,n.owner.html_url,n.forks_count,n.stargazers_count,n.open_issues_count);e.repositories.push(s),e.APICaller.sendREADMERequest(s).then((function(t){s.setREADME(t),e.output.drawRepositoryCard(s)})).catch((function(t){console.log(t)}))},n=0;n<r.items.length;n++)o(n);else e.output.outputNoRepositoriesFound()}catch(t){e.output.outputNoRepositoriesFound()}})).catch((function(t){console.log(t)}))},this.APICaller=new r,this.output=new o,this.repositories=new Array}return e.prototype.start=function(){var t=document.querySelector(".icon"),e=document.querySelector("#submit"),r=document.querySelector("#username"),o=document.querySelector("#repo"),n=document.querySelectorAll("#lang");e.addEventListener("click",this.retrieveRepositories),r.addEventListener("keyup",this.setUsernameFilter),o.addEventListener("keyup",this.setRepositoryFilter);for(var s=0;s<n.length;s++)n[s].addEventListener("click",this.setLanguageFilter);t.addEventListener("click",this.setBurgerMenu)},e.prototype.getRepositories=function(){return this.repositories},e.prototype.setRepositories=function(t){this.repositories=t},e.prototype.resetRepositories=function(){this.repositories=new Array},e}())).start()})();